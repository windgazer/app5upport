/*! app5upport - v0.0.9 - 2013-11-27 */window.a5s="undefined"==typeof window.a5s?{}:window.a5s;var ClassTemplate=function(){"use strict";function a(a){var b,c,d,e,f=document.getElementsByTagName("script"),g=f.length,h=g,i=new RegExp("^(.*/)"+a+".js\\b.*$","i");for(h;h--;)if(b=f[h],c=b.src,d=c.match(i))return e=d[1]+a+".html";return null}var b={},c=/\${([^}]+)}/gi,d='<article id="${id}">Loading...</article>',e={},f={loadTemplate:function(b){var c,d,f,g=this.getTemplate(b),h=e[b];return null===g&&"undefined"==typeof h&&(h=new RSVP.Promise,c=a(b),d=this,f=new HTTPRequest(!1),d.trigger("template.queued",{type:b,url:c}),f.doGet(c).then(function(a){var c=a.request,f=c.httpRequest.responseText;d.addTemplate(b,f),d.trigger("template.finished",{type:b,template:f}),h.trigger("template.finished",{type:b,template:f}),h.resolve({type:b,template:f}),delete e[b]}),e[b]=h),h},renderTemplate:function(a,b,c,f){var g=ClassTemplate.getTemplate(a),h=e[a],i=f||new RSVP.Promise;if(null===g?(h||(h=this.loadTemplate(a)),h.on("template.finished",function(){ClassTemplate.renderTemplate(a,b,c,i),h.resolve()}),g=d):i.resolve({node:c}),!c)throw"No target-node specified!!!";return c.innerHTML=ClassTemplate.fillTemplate(g,b),i},addTemplate:function(a,c){b[a]=c},getTemplate:function(a){return b[a]?b[a]:null},fillTemplate:function(a,b){for(var d="",e=null,f=0;e=c.exec(a);){var g=b[e[1]];g="undefined"!=typeof g?g:e[1],d+=RegExp.leftContext.substr(f)+g,f=c.lastIndex}return d.length<=0?a:d+=RegExp.rightContext}};if(window.unittesting){var g=null;f.reset=function(){null===g&&(g=b),b={};for(var a in g)b[a]=g[a]}}return RSVP.EventTarget.mixin(f),f}(a5s);