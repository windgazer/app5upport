/*! app5upport - v0.0.5 - 2013-04-15 */window.a5s=window.a5s===void 0?{}:window.a5s;var ClassTemplate=function(){function e(e){var t=document.getElementsByTagName("script"),n=t.length,l=n,r=RegExp("^(.*/)"+e+".js\\b.*$","i");for(l;l--;){var a=t[l],i=a.src,o=i.match(r);if(o){var p=o[1]+e+".html";return p}}return null}var t={},n=/\${([^}]+)}/gi,l='<article id="${id}">Loading...</article>',r={};if(helper={loadTemplate:function(t){var n=this.getTemplate(t),l=r[t];if(null===n&&l===void 0){l=new RSVP.Promise;var a=e(t),i=this,o=new HTTPRequest(!1);i.trigger("template.queued",{type:t,url:a}),o.doGet(a).then(function(e){var n=e.request,a=n.httpRequest.responseText;i.addTemplate(t,a),i.trigger("template.finished",{type:t,template:a}),l.trigger("template.finished",{type:t,template:a}),l.resolve({type:t,template:a}),delete r[t]}),r[t]=l}return l},renderTemplate:function(e,t,n,a){var i=ClassTemplate.getTemplate(e),o=r[e],a=a||new RSVP.Promise;if(null===i?(o||(o=this.loadTemplate(e)),o.on("template.finished",function(){ClassTemplate.renderTemplate(e,t,n,a),o.resolve()}),i=l):a.resolve({node:n}),!n)throw"No target-node specified!!!";return n.innerHTML=ClassTemplate.fillTemplate(i,t),a},addTemplate:function(e,n){t[e]=n},getTemplate:function(e){return t[e]?t[e]:null},fillTemplate:function(e,t){for(var l="",r=null,a=0;r=n.exec(e);){var i=t[r[1]];i=i!==void 0?i:r[1],l+=RegExp.leftContext.substr(a)+i,a=n.lastIndex}return 0>=l.length?e:l+=RegExp.rightContext}},window.unittesting){var a=null;helper.reset=function(){null===a&&(a=t),t={};for(var e in a)t[e]=cachedtemplate[e]}}return RSVP.EventTarget.mixin(helper),helper}(a5s);